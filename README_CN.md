# 比特币量化交易策略研究

基于机器学习的比特币交易策略开发项目，使用1分钟级别的价格数据进行量化分析和策略回测。

## 项目简介

本项目旨在开发可靠的加密货币自动化交易策略，通过数据分析和机器学习模型预测比特币价格走势，并基于预测结果生成交易信号。

**核心技术：** Python、数据分析、机器学习、时间序列预测

**数据来源：** 2023年比特币/美元1分钟级别交易数据

## 项目发展历程

### 第一阶段：数据基础建设（2023年2-6月）
清理和分析原始数据，开发技术指标计算系统，包括趋势指标（均线、ADX）、动量指标（RSI、MACD）、波动率指标（布林带、ATR）等。

### 第二阶段：特征工程优化（2023年6-7月）
扩展技术指标体系，引入比特币与标普500相关性分析、分形维度等高级指标。通过代码优化将计算速度提升80%。

### 第三阶段：市场状态分类（2023年7-8月）
手工标注月度数据集的市场状态（牛市/熊市/震荡市），训练机器学习分类器自动识别市场状态。模型在训练集上表现优秀。

### 第四阶段：初步策略开发（2023年7-8月）
开发基于规则的交易策略，发现交易成本（0.75%手续费）对策略收益有重大影响。高频交易因手续费问题难以盈利。

### 第五阶段：模型对比测试（2023年8月）
系统性对比20多种机器学习分类模型，发现即使模型准确率超过99%，由于退出逻辑不佳仍可能亏损。强调交易成本管理的重要性。

### 第六阶段：混合策略（2023年10月）
结合规则和机器学习的混合策略，在风险调整后收益方面优于单一方法。

### 第七阶段：回归预测（2023年10-11月）
从分类（涨/跌）转向回归（预测收益率幅度），建立A/B测试框架对比不同目标变量，严格修复数据泄漏和前视偏差问题。

**关键发现：** 市场状态分类模型虽然准确率高，但在实际交易中无法产生盈利信号，导致战略转向。

### 第八阶段：时间序列预测（2025年12月）**【当前重点】**

发现市场状态分类方法失效后，转向混合时间序列预测方法。这成为新的主要策略和性能基准。

**当前方法：**
- **Prophet模型：** 捕捉趋势和季节性模式
- **ARIMA/SARIMA模型：** 预测残差波动
- **GARCH模型：** 识别波动率状态，避免极端波动期交易

**最新进展：**
- 测试1分钟至4小时不同时间分辨率的预测效果
- A/B测试对比ARIMA与SARIMA在残差建模中的表现
- 严格的数据泄漏防护：所有高频信号在使用前进行时间位移

**核心优势：** 时间序列预测直接预测价格和预期收益，生成持续稳定的交易信号，即使绝对收益不高，也能提供可量化的性能基准。

## 项目文件结构

```
Crypto_Research/
├── data/                           # 数据文件
├── features/                       # 技术指标计算
├── models/code/
│   ├── timeseries_forecasting.ipynb           # 基准模型：Prophet + ARIMA
│   └── market_regime_classification.ipynb     # 市场状态分类（已弃用）
├── strategy/
│   ├── integrated_strategy_v4.ipynb           # 最新版：A/B测试对比
│   ├── integrated_strategy_v3.ipynb           # GARCH波动率过滤
│   └── integrated_strategy_v2.ipynb           # 整合策略
└── utils/                          # 工具函数
```

## 技术栈

**数据处理：** Pandas、NumPy
**可视化：** Matplotlib、Seaborn
**机器学习：** Scikit-learn、PyCaret、LightGBM
**时间序列预测：** Prophet、Statsmodels（ARIMA/SARIMA）、Arch（GARCH）
**技术分析：** TA库及自定义实现
**数据库：** ArcticDB（时间序列数据存储）

## 核心发现

### 1. 交易成本至关重要
0.75%的交易手续费加上滑点会大幅改变策略可行性。高频交易因手续费问题难以盈利。

### 2. 数据泄漏问题隐蔽
即使是市场状态分类也可能引入前视偏差。必须对所有特征进行严格的时间位移处理。

### 3. 市场状态分类的局限性
市场状态模型（牛市/熊市/震荡市）在回测中准确率很高，但在实盘前测中无法产生盈利信号。分类精度不等于交易优势。

### 4. 时间序列预测作为基准
混合Prophet + ARIMA/SARIMA提供可量化的基准性能。直接价格预测生成稳定信号，优于基于市场状态的方法。

### 5. 退出策略比入场策略更重要
发现准确率99%以上的模型因退出策略不佳仍然亏损。交易退出时的手续费管理至关重要。

### 6. 回测的真实性
必须模拟：
- 下一根K线入场（无即时成交）
- K线内止损检查
- 入场和退出的滑点
- 严格的时间顺序（信号在执行前位移）

### 7. 多时间周期权衡
高时间周期（4小时）信号更清晰但交易机会少。1分钟分辨率粒度最大但噪音和过拟合风险高。

### 8. 波动率过滤
基于GARCH的波动率状态识别可改善风险管理，但可能过滤掉波动期的盈利交易。阈值选择是关键。

## 快速开始

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行推荐顺序

1. **技术指标工程：** `features/trend_indicator.ipynb`
2. **时间序列基准：** `models/code/timeseries_forecasting.ipynb`
3. **最新策略：** `strategy/integrated_strategy_v4.ipynb`
4. **波动率过滤：** `strategy/integrated_strategy_v3.ipynb`

## 未来工作方向

- [ ] 优化ARIMA/SARIMA超参数
- [ ] 滚动预测窗口
- [ ] 集成多个时间序列模型
- [ ] 整合更多数据源（订单簿、资金费率、社交情绪）
- [ ] 深度学习模型（LSTM、Transformer）
- [ ] 多资产组合策略
- [ ] 实时数据接入和模拟交易
- [ ] 信号阈值优化

## 项目成果

本项目展示了从基础数据分析到复杂机器学习策略的完整量化研究流程，特别强调：

- **严格的数据处理：** 避免前视偏差和数据泄漏
- **真实的回测环境：** 考虑交易成本、滑点、执行延迟
- **方法论转变：** 从理论上准确但实践中失效的市场分类，转向可量化的时间序列预测
- **持续优化：** 通过A/B测试不断改进模型和策略

**关键洞察：** 在量化交易中，简单且稳健的方法往往优于复杂但容易过拟合的模型。时间序列预测虽然看似基础，但提供了可靠的性能基准和稳定的交易信号生成能力。

---

**最后更新：** 2025年12月
**项目状态：** 活跃研究中
**最新笔记本：** [strategy/integrated_strategy_v4.ipynb](strategy/integrated_strategy_v4.ipynb)
**基准模型：** [models/code/timeseries_forecasting.ipynb](models/code/timeseries_forecasting.ipynb)

## 免责声明

本项目仅供**教育和研究目的**使用。代码和策略不构成投资建议。加密货币交易存在重大风险，过往表现不代表未来结果。

## 开源协议

MIT License
